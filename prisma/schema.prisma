generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id             Int              @id @default(autoincrement())
  email          String           @unique
  username       String           @unique
  password       String
  role           Role             @default(USER)
  firstName      String
  lastName       String
  image          String?
  phone          String?
  skills         Skills[]         @default([])
  availability   Int[]
  validation     Boolean          @default(false)
  validcheck     String?
  passchgcanx    String?
  validpasschg   String?
  applics        Application[]    @relation("UserApplics")
  positions      Position[]       @relation("UserPosits")
  projects       ProjectMembers[]
  adminPositions Position[]       @relation("PositAdmins")
  adminProjects  Project[]        @relation("ProjAdmins")
  savedProjects  Project[]        @relation("SavedProjects")
  User_A         User[]           @relation("UserContacts")
  User_B         User[]           @relation("UserContacts")
}

model Project {
  id        Int              @id @default(autoincrement())
  image     String?
  title     String
  descrip   String
  duedate   String
  skills    Skills[]         @default([])
  positions Position[]       @relation("ProjPosits")
  members   ProjectMembers[]
  admins    User[]           @relation("ProjAdmins")
  savedBy   User[]           @relation("SavedProjects")
}

model Position {
  id        Int           @id @default(autoincrement())
  image     String?
  title     String
  descrip   String
  skills    Skills[]      @default([])
  datestart String
  dateend   String
  projectId Int?
  memberId  Int?
  applics   Application[] @relation("PositApplics")
  member    User?         @relation("UserPosits", fields: [memberId], references: [id])
  project   Project?      @relation("ProjPosits", fields: [projectId], references: [id])
  admins    User[]        @relation("PositAdmins")
}

model Application {
  id          Int       @id @default(autoincrement())
  userId      Int?
  positionId  Int?
  application String?
  position    Position? @relation("PositApplics", fields: [positionId], references: [id])
  user        User?     @relation("UserApplics", fields: [userId], references: [id])
}

model ProjectMembers {
  id        Int     @id @default(autoincrement())
  userId    Int
  projectId Int
  role      String?
  project   Project @relation(fields: [projectId], references: [id])
  user      User    @relation(fields: [userId], references: [id])

  @@unique([userId, projectId])
}

enum Role {
  USER
  ADMIN
}

enum Skills {
  other
  programming
  scripting
  AppleScript
  Arduino
  Assembly
  Batch
  Bootstrap
  C
  CPP
  CryEngine
  Csharp
  CSS
  FORTRAN
  GameMaker
  Godot
  HTML
  Java
  JS
  Lisp
  Lumberyard
  MATLAB
  NextJS
  Pascal
  Perl
  PHP
  Python
  R
  React
  RenPy
  Ruby
  Rust
  Scratch
  SQL
  Swift
  Torque
  TS
  Unity
  Unreal
  XML
}
